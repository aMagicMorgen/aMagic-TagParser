# aMagic-TagParser
PHP-–∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (–≤ —Å—Ç–∏–ª–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤) –≤ –≤–∞–ª–∏–¥–Ω—ã–π HTML.

### –ö–æ–¥ –ü–∞—Ä—Å–µ—Ä–∞ –¢–µ–≥–æ–≤ `class TagParser()` (PHP):

- 09.04.2025–≥., –∞–≤—Ç–æ—Ä –ê–ª–µ–∫—Å–µ–π –ù–µ—á–∞–µ–≤, –≥. –ú–æ—Å–∫–≤–∞, +7(999)003-90-23, nechaev72@list.ru

## –õ–∏—Ü–µ–Ω–∑–∏—è <a name="–ª–∏—Ü–µ–Ω–∑–∏—è"></a>
MIT License. –°–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

---

# –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è `TagParser`

## –°–ª–∞–π–¥ 1: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí HTML
- üåÄ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –æ—Ç—Å—Ç—É–ø—ã
- ‚ö° –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ void-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
- üîß –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

## –°–ª–∞–π–¥ 2: –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```css
div#header.main(data-role='banner')
  ul.nav
    li –î–æ–º–æ–π
    li –û –Ω–∞—Å
```

## –°–ª–∞–π–¥ 3: –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```html
<div id="header" class="main" data-role="banner">
  <ul class="nav">
    <li>–î–æ–º–æ–π</li>
    <li>–û –Ω–∞—Å</li>
  </ul>
</div>
```

## –°–ª–∞–π–¥ 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
```
–î–æ–ø—É—Å—Ç–∏–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
‚Ä¢ 2 –ø—Ä–æ–±–µ–ª–∞
‚Ä¢ 1 —Ç–∞–±
‚Ä¢ –°–º–µ—à–∞–Ω–Ω—ã–µ (—Ç–∞–± + –ø—Ä–æ–±–µ–ª—ã)
```

## –°–ª–∞–π–¥ 5: –ò—Ç–æ–≥–∏
- –£—Å–∫–æ—Ä—è–µ—Ç –≤–µ—Ä—Å—Ç–∫—É –≤ 3 —Ä–∞–∑–∞ üöÄ
- –ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
- –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å <a name="—Å–∏–Ω—Ç–∞–∫—Å–∏—Å"></a>
### –°—Ç—Ä–æ–∫–∞ —à–∞–±–ª–æ–Ω–∞
```
[–æ—Ç—Å—Ç—É–ø—ã][—Ç–µ–≥][#id][.class][[–∞—Ç—Ä–∏–±—É—Ç—ã]][ —Ç–µ–∫—Å—Ç]
```
#### –ü—Ä–∏–º–µ—Ä
```
div#header.container[data-role='main'] –ó–∞–≥–æ–ª–æ–≤–æ–∫
    ^^     ^            ^                 ^
    |      |            |                 |
    –æ—Ç—Å—Ç—É–ø—ã          –∞—Ç—Ä–∏–±—É—Ç—ã           —Ç–µ–∫—Å—Ç
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
| –≠–ª–µ–º–µ–Ω—Ç       | –ü—Ä–∏–º–µ—Ä              | –†–µ–∑—É–ª—å—Ç–∞—Ç                     |
|---------------|---------------------|-------------------------------|
| –¢–µ–≥           | `div`               | `<div>`                       |
| ID            | `#main`             | `id="main"`                   |
| –ö–ª–∞—Å—Å—ã        | `.btn.large`        | `class="btn large"`           |
| –ê—Ç—Ä–∏–±—É—Ç—ã      | `(data-id='5')`     | `data-id="5"`                 |
| –¢–µ–∫—Å—Ç         | `–¢–µ–∫—Å—Ç`             | `>–¢–µ–∫—Å—Ç</tag>`                |
| Void-—ç–ª–µ–º–µ–Ω—Ç—ã | `img(src='pic.jpg')`| `<img src="pic.jpg">`         |

---

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ <a name="—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"></a>
### 1. –°–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã
```php
$input = "
ul
\tli (—Ç–∞–±)
  \tli (—Ç–∞–± + 2 –ø—Ä–æ–±–µ–ª–∞)
";
```
**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:** –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–∞–±–æ–≤ ( `\t` ) –∏ –ø—Ä–æ–±–µ–ª–æ–≤.

### 2. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
```php
$input = "
div
  div
    p –¢–µ–∫—Å—Ç
";
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<div>
  <div>
    <p>–¢–µ–∫—Å—Ç</p>
  </div>
</div>
```

### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
```php
$input = "input[type='email' required]";
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<input type="email" required>
```

---

–†–µ–∞–ª–∏–∑—É–µ–º —Ç–∞–∫–æ–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ PHP. –û–Ω –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∏–¥–∞ `tag.class#id[attr="value"] –¢–µ–∫—Å—Ç` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –æ—Ç—Å—Ç—É–ø—ã (2 –∏–ª–∏ 4 –ø—Ä–æ–±–µ–ª–∞).

```php
<?php
//tagparser.php
// 09.04.2025 –∞–≤—Ç–æ—Ä –ê–ª–µ–∫—Å–µ–π –ù–µ—á–∞–µ–≤, –≥. –ú–æ—Å–∫–≤–∞, +7(999)003-90-23, nechaev72@list.ru


class TagParse {
   const VOID_TAGS = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'];
    private $html;
	
	public function __toString(): string {
        return $this->html;
    }
	
	private function isVoidTag(string $tag): bool {
        return in_array($tag, static::VOID_TAGS);
    }
	
	// –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —ç—Ç–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
	private function getTemplate(string $shablon)
	{
		 // –ï—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —á–∏—Ç–∞–µ–º –µ–≥–æ
		 if(file_exists($shablon)) $shablon = file_get_contents($shablon);
		return $shablon;
	 }

    public function __construct(string $input) {
		$input = $this->getTemplate($input);
        $lines = explode("\n", trim($input));
        $stack = [];
        $this->html = '';

        foreach ($lines as $line) {
			 #$line = trim($line);
			// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
            if (trim($line) === '' || strpos($line, "<!--") || strpos($line, "-->")) continue;
			// –ö–æ–º–µ–Ω—Ç–∞—Ä–∏–∏
			if(strpos(' ' . $line, '//')) {
				$this->html .= "\n<!-- " . trim(str_replace('//', '', $line)) . " -->";
				continue;
			}
			// –ø—Ä–æ–ø—É—Å–∫–∞–µ–º HTML
			if(trim($line)[0] == '<') {
				$this->html .= "\n" . $line;
				continue;
			}
			
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
            preg_match('/^(\s*)/', $line, $matches);
			$space = str_replace("\t", "  ", $matches[1]);
            $indent = strlen($space);

			// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–µ–≥–∏ –ø—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
            while ($indent < (count($stack) * 2)) {
                $this->html .= '</' . array_pop($stack) . '>';
            }
			
			// –ü–∞—Ä—Å–∏–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É
            $node = $this->parseLine(trim($line));
      
			// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-–∫–æ–¥–∞
            $this->html .= "\n" . $space . $this->renderTag($node);		
		
			if (!$this->isVoidTag($node['tag']) && $node['tag'] !== 'include') {
				array_push($stack, $node['tag']);
			}
        }

        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ç–µ–≥–∏
        while (!empty($stack)) {
            $this->html .= "</" . array_pop($stack) . ">\n";
        }
    }
	
	private function parseLine(string $line): array {
        // –ü–∞—Ä—Å–∏–º —Å—Ç—Ä–æ–∫—É —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
					  # –¢–µ–≥         #ID            /name         .–ö–ª–∞—Å—Å—ã         (–ê—Ç—Ä–∏–±—É—Ç—ã)     –ø—Ä–æ–±–µ–ª –¢–µ–∫—Å—Ç
       	preg_match('/^(?:([a-z0-9]+))?(?:#([\w-]+))?(?:\/([\w-]+))?(?:\.([\w.-]+))?(?:\((.*?)\))?(?:\s+(.*))?$/i', $line, $matches);

		 $classes = isset($matches[4]) && !empty($matches[4]) ? trim(str_replace('.', ' ', $matches[4])) : '';
		 $tag = !empty($matches[1]) ? $matches[1] : 'div';

        return [
			'tag' => $tag, // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–≥ —è–≤–Ω–æ –∏–ª–∏ –Ω–∏—á–µ–≥–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
            'attr' => [
				'id' => $matches[2] ?? '',
				'name' => $matches[3] ?? '',
				'class' => $classes
				],
            'attrs' => $matches[5] ?? '',
            'text' => $matches[6] ?? ''
			];
    }
	
	private function renderTag(array $node): string {

		if($node['tag'] == 'include'){
			$text = $this->getTemplate($node['text']);
			return New TagParse($text);
		}
        
		$htmls = '<' . $node['tag'] . ' '; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–≥, –∞ –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π div
		if($node['tag'] == 'html') $htmls = "<!DOCTYPE html>\n" . $htmls;
		
        foreach ($node['attr'] as $name => $value) {
			// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ
            if ($value === '') continue;
            $htmls .= htmlspecialchars($name) . '="' . htmlspecialchars($value) . '" ';
			
        }
		$htmls .= $node['attrs'] . ">" . (!$this->isVoidTag($node['tag']) ? $node['text'] : '');
		
        return $htmls;
    }
}

```


### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```PHP
$input = "
ul#main.menu
  li.item –ü—É–Ω–∫—Ç 1
  li.item.active –ü—É–Ω–∫—Ç 2
  input[type='text' placeholder='–í–≤–µ–¥–∏—Ç–µ –∏–º—è']
";

echo new TagParser($input);
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```html
<ul id="main" class="menu">
  <li class="item">–ü—É–Ω–∫—Ç 1</li>
  <li class="item active">–ü—É–Ω–∫—Ç 2</li>
  <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
</ul>
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞:
1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –æ—Ç—Å—Ç—É–ø—ã** (2 –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å)
2. **–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–µ–≥–æ–≤** –¥–ª—è void-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ (input, img –∏ –¥—Ä.)
3. **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤** —á–µ—Ä–µ–∑ htmlspecialchars()
4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
   - –¢–µ–≥: `div` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - ID: `#id`
   - –ö–ª–∞—Å—Å—ã: `.class1.class2`
   - –ê—Ç—Ä–∏–±—É—Ç—ã: `[attr1="val1" attr2]`
   - –¢–µ–∫—Å—Ç: –ø–æ—Å–ª–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:
1. **Slim** (Ruby) - –ø–æ—Ö–æ–∂–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
2. **Emmet** (–∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã) - —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
3. **Pug/Jade** - –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å –ª–æ–≥–∏–∫–æ–π

–¢–∞–∫–æ–π –ø–∞—Ä—Å–µ—Ä –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è:
- –ë—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–∏—è –≤–µ—Ä—Å—Ç–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã (Twig, Blade), –Ω–æ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.


–î–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å `TagParser` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å. –ü—Ä–∏–≤–µ–¥–µ–º –ø—Ä–∏–º–µ—Ä —Å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤:

```php
$input = "
ul.tree
  li.folder
    span –ü–∞–ø–∫–∞ 1
    ul
      li.file –§–∞–π–ª 1
      li.folder
        span –ü–∞–ø–∫–∞ 2
        ul
          li.file –§–∞–π–ª 2
  li.folder
    span –ü–∞–ø–∫–∞ 3
";

echo  new TagParser($input);

```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<ul class="tree">
  <li class="folder">
    <span>–ü–∞–ø–∫–∞ 1</span>
    <ul>
      <li class="file">–§–∞–π–ª 1</li>
      <li class="folder">
        <span>–ü–∞–ø–∫–∞ 2</span>
        <ul>
          <li class="file">–§–∞–π–ª 2</li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="folder">
    <span>–ü–∞–ø–∫–∞ 3</span>
  </li>
</ul>
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–û—Ç—Å—Ç—É–ø—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.** –ö–∞–∂–¥—ã–µ 2 –ø—Ä–æ–±–µ–ª–∞ ‚Äî –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å.
2. **–°—Ç–µ–∫ —Ç–µ–≥–æ–≤** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã. –ü—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ –æ—Ç—Å—Ç—É–ø–∞ —Ç–µ–≥–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
3. **Void-—Ç–µ–≥–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `<img>`) –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞–∫—Ä—ã–≤–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

### –ü—Ä–∏–º–µ—Ä —Å —Ç–µ–≥–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π:
```php
$input = "
div
  div
    div
      p –ì–ª—É–±–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å
  div
    p –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
";

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// <div>
//   <div>
//     <div>
//       <p>–ì–ª—É–±–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å</p>
//     </div>
//   </div>
//   <div>
//     <p>–í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</p>
//   </div>
// </div>
```
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ TagParse

## –û–ø–∏—Å–∞–Ω–∏–µ
–ö–ª–∞—Å—Å `TagParse` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (CSS-–ø–æ–¥–æ–±–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤) –≤ –≤–∞–ª–∏–¥–Ω—ã–π HTML. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –≤–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã.

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å—Ç—Ä–æ–∫–∏
```
—Ç–µ–≥#id/name.–∫–ª–∞—Å—Å1.–∫–ª–∞—Å—Å2(–∞—Ç—Ä–∏–±—É—Ç—ã) —Ç–µ–∫—Å—Ç
```

| –ß–∞—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-------|----------|--------|
| `—Ç–µ–≥` | HTML-—Ç–µ–≥ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è div) | `div`, `p`, `a` |
| `#id` | ID —ç–ª–µ–º–µ–Ω—Ç–∞ | `#main` |
| `/name` | –ê—Ç—Ä–∏–±—É—Ç name | `/username` |
| `.–∫–ª–∞—Å—Å` | –ö–ª–∞—Å—Å(—ã) —ç–ª–µ–º–µ–Ω—Ç–∞ | `.menu.active` |
| `(–∞—Ç—Ä–∏–±—É—Ç—ã)` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã | `(href='/')`, `(type='text' placeholder='–ò–º—è')` |
| `—Ç–µ–∫—Å—Ç` | –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ | `–ü—É–Ω–∫—Ç 1` |

### –û—Ç—Å—Ç—É–ø—ã
–£—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ–±–µ–ª–æ–≤ (2 –ø—Ä–æ–±–µ–ª–∞ = 1 —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏). –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–∞–±—É–ª—è—Ü–∏–∏.

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `// —Ç–µ–∫—Å—Ç` - –≤–∏–¥–∏–º—ã–π HTML-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (`<!-- —Ç–µ–∫—Å—Ç -->`)
- `<!-- —Ç–µ–∫—Å—Ç -->` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è)

### –í–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```
include ./–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É.php
```
–í–∫–ª—é—á–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. –§–∞–π–ª –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π HTML, —Ç–∞–∫ –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å TagParse.

### –ü—Ä—è–º–æ–π HTML
–õ—é–±–∞—è —Å—Ç—Ä–æ–∫–∞, –Ω–∞—á–∏–Ω–∞—é—â–∞—è—Å—è —Å `<`, –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å.

## –ú–µ—Ç–æ–¥—ã

### `__construct(string $input)`
–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç TagParse. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏–±–æ —Å—Ç—Ä–æ–∫—É —Å —à–∞–±–ª–æ–Ω–æ–º, –ª–∏–±–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É.

```php
// –ò–∑ —Å—Ç—Ä–æ–∫–∏
$parser = new TagParse("div.container –¢–µ–∫—Å—Ç");

// –ò–∑ —Ñ–∞–π–ª–∞
$parser = new TagParse("./template.tpl");
```

### `__toString(): string`
–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç –≤ —Å—Ç—Ä–æ–∫—É HTML –ø—Ä–∏ –≤—ã–≤–æ–¥–µ.

```php
echo new TagParse($input); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç __toString()
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```php
$template = "
div.container
  h1 –ó–∞–≥–æ–ª–æ–≤–æ–∫
  p.lead –í–µ–¥—É—â–∏–π —Ç–µ–∫—Å—Ç
  a.link(href='/') –°—Å—ã–ª–∫–∞
";

echo new TagParse($template);
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<div class="container">
  <h1>–ó–∞–≥–æ–ª–æ–≤–æ–∫</h1>
  <p class="lead">–í–µ–¥—É—â–∏–π —Ç–µ–∫—Å—Ç</p>
  <a class="link" href="/">–°—Å—ã–ª–∫–∞</a>
</div>
```

### –ü—Ä–∏–º–µ—Ä 2: –§–æ—Ä–º–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
```php
$template = "
form#login/contact-form(method='POST')
  input.form-control(type='text' name='username' placeholder='–õ–æ–≥–∏–Ω')
  input.form-control(type='password' name='password' placeholder='–ü–∞—Ä–æ–ª—å')
  button.btn.btn-primary(type='submit') –í–æ–π—Ç–∏
";

echo new TagParse($template);
```

### –ü—Ä–∏–º–µ—Ä 3: –°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```php
$template = "
<!DOCTYPE html>
html(lang='ru')
  head
    meta(charset='utf-8')
    title –ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  body
    // –≠—Ç–æ –≤–∏–¥–∏–º—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
    header#header
      .logo –õ–æ–≥–æ—Ç–∏–ø
      nav
        ul.menu
          li.active
            a(href='/') –ì–ª–∞–≤–Ω–∞—è
          li
            a(href='/about') –û –Ω–∞—Å
    main.container
      article
        h1 –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
        p.lead –†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ
    <!-- –°–∫—Ä—ã—Ç—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ HTML -->
    footer
      p &copy; 2024 –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã
";

echo new TagParse($template);
```

### –ü—Ä–∏–º–µ—Ä 4: –í–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**header.php:**
```php
<header>
  <nav>
    <ul class="menu">
      <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
      <li><a href="/about">–û –Ω–∞—Å</a></li>
    </ul>
  </nav>
</header>
```

**include.php:**
```php
div.widget
  h3 –í–∏–¥–∂–µ—Ç
  p –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∏–¥–∂–µ—Ç–∞
```

**main.tpl:**
```php
<!DOCTYPE html>
html
  head
    title –°–∞–π—Ç
  body
    include ./header.php
    main.content
      h1 –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
      p –¢–µ–∫—Å—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    include ./include.php
    footer
      p –ü–æ–¥–≤–∞–ª —Å–∞–π—Ç–∞
```

```php
echo new TagParse("./main.tpl");
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å —à–∞–±–ª–æ–Ω–æ–º
```php
$footer = "
footer
  .container
    p &copy; 2024
";

$template = "
div.page
  header –®–∞–ø–∫–∞
  main –ö–æ–Ω—Ç–µ–Ω—Ç
  $footer
";

echo new TagParse($template);
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–°–∞–º–æ–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–µ–≥–∏**: `area`, `base`, `br`, `col`, `embed`, `hr`, `img`, `input`, `link`, `meta`, `param`, `source`, `track`, `wbr` - –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ —Ç–µ–≥–∞

2. **–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã**: –¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `htmlspecialchars()`

3. **–ê—Ç—Ä–∏–±—É—Ç—ã**: –ó–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

4. **–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ç–µ–≥–∏

5. **–ì–∏–±–∫–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π HTML –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å TagParse

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —á—Ç–µ–Ω–∏—è
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ include, –ø—É—Ç—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ PHP –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ —à–∞–±–ª–æ–Ω–∞ (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ 5)


[GitHub Repository](https://github.com/yourname/tagparser) | [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) | [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
